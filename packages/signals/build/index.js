var F=Symbol("value"),H=Symbol("subscriptions"),J=Symbol("fields"),K=new Array,Q,_=globalThis.queueMicrotask??((z)=>Promise.resolve().then(z)),L=new Set,M=(z)=>{if(L.add(z),L.size===1)_(()=>{for(let A of L)A();L.clear()})},I={add(z){Q?.add(z)},push:(z=new Set)=>{K.push(z),Q=z},pop:()=>{let z=K.pop()??new Set;return Q=K[K.length-1],z}};function q(z){return F in z}function P(z){return J in z}class W{[F];[H]=new Array;constructor(z){this[F]=z}valueOf(){return this[F]}}function R(z){if(q(z))return I.add(z),z[F];else return z}function X(z,A){if(A!==z[F]){let D=z[F]=A;if(z[F]=A,P(z))z[J]={};for(let E of z[H])M(E)}return z}function B(z,A){if(Array.isArray(z)||z instanceof Set){let D=new Array;for(let E of z)D.push(B(E,A));return()=>D.forEach((E)=>E())}else return T(z,A),()=>Y(z,A)}function T(z,A){z[H].push(A)}function Y(z,A){let D=z[H].indexOf(A);if(D!==-1)return z[H].splice(D,1),!0;return!1}var N=(z)=>typeof z==="object"&&z!==null;function U(z){if(!N(z))return new W(z);let A=Object.create(z);return A[J]={},A[H]=new Array,A[F]=z,new Proxy(A,{get(D,E){return D[J][E]??=U(D[F][E])},set(D,E,G){let Z=D[J][E]??=U(D[F][E]);return X(Z,G),!0}})}function j(z){let A=U(void 0);return C(()=>X(A,z())),A}function C(z){I.push(),z();let A=I.pop();for(let E of A)T(E,D);function D(){I.push(),z();let E=I.pop();for(let G of A)if(!E.has(G))Y(G,D),A.delete(G);for(let G of E)if(!A.has(G))A.add(G),T(G,D)}}export{B as watch,Y as unsubscribe,T as subscribe,X as set,U as reactive,P as isReactiveObject,q as isReactive,N as isObject,R as get,C as effect,j as derived,W as ReactivePrimitive};

//# debugId=F45DD8792428DE4364756E2164756E21
//# sourceMappingURL=index.js.map
